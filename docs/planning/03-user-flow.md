# 사용자 플로우 (User Flow)

> 최종 수정일: 2026.02.12

## 📋 개요
Our-Taste-Map의 주요 사용자 시나리오를 플로우차트 형태로 정리한 문서입니다.

**프로젝트 방향:**
- v1.0: 우리 부부 전용 (로그인 없음)
- 주요 사용자: 우리 둘
- 부가 사용자: 공유 링크로 방문한 친구들 (읽기 전용)

---

## 🎯 v1.0 주요 플로우

### 1. 첫 방문 & 메인 화면 진입

```
[웹사이트 접속]
    ↓
[메인 화면 로드]
    ↓
┌─────────────────┐
│  지도 뷰 (기본) │
│  - 전체 마커 표시│
│  - 카테고리 필터│
│  - 검색바       │
└─────────────────┘
    ↓
사용자 선택
    ├─ 지도에서 마커 탐색 → [플로우 2]
    ├─ 리스트 뷰 전환 → [플로우 3]
    ├─ 새 장소 추가 → [플로우 4]
    └─ 검색 사용 → [플로우 5]
```

---

### 2. 지도에서 장소 탐색하기 🗺️

```
[지도 뷰]
    ↓
사용자 행동
    ├─ 지도 확대/축소/이동
    ├─ 카테고리 필터 적용
    │   └─ 맛집/카페/멋진 장소 선택
    └─ 즐겨찾기 그룹 필터
        └─ 인천/동탄/수원 등 선택
    ↓
[필터링된 마커 표시]
    ↓
[마커 클릭]
    ↓
┌──────────────────┐
│ 미리보기 팝업    │
│ - 이름           │
│ - 별점           │
│ - 한줄평         │
│ - 방문일         │ ⭐ NEW
└──────────────────┘
    ↓
사용자 선택
    ├─ 팝업 닫기 → [지도 뷰]
    ├─ 상세보기 클릭 → [플로우 6]
    └─ 수정/삭제 → [플로우 7]
```

**화면 예시:**
```
┌─────────────────────────────────────┐
│ Our-Taste-Map                   ☰   │
├─────────────────────────────────────┤
│ [🔍 검색]  [+ 장소 추가]            │
│                                     │
│ 필터: [전체][맛집][카페][멋진 장소] │
│ 그룹: [전체][인천][동탄][수원]      │
│                                     │
│        🗺️                           │
│     🍽️  ☕  ✨                      │
│   ☕      🍽️                        │
│       🍽️     ✨                     │
│                                     │
└─────────────────────────────────────┘
```

---

### 3. 리스트 뷰로 보기 📝

```
[지도 뷰]
    ↓
[지도/리스트 토글 버튼 클릭]
    ↓
[리스트 뷰로 전환]
    ↓
┌──────────────────────────┐
│ 장소 카드 목록           │
│ ┌────────────────────┐   │
│ │ [썸네일]           │   │
│ │ 맛집 이름 ⭐⭐⭐⭐   │   │
│ │ 한줄평...          │   │
│ │ 📅 2024.08.15      │   │ ⭐ NEW
│ │ 주소               │   │
│ └────────────────────┘   │
│ ┌────────────────────┐   │
│ │ [썸네일]           │   │
│ │ 카페 이름 ⭐⭐⭐⭐⭐ │   │
│ │ 한줄평...          │   │
│ │ 📅 2024.07.20      │   │ ⭐ NEW
│ │ 주소               │   │
│ └────────────────────┘   │
└──────────────────────────┘
    ↓
사용자 선택
    ├─ 정렬 변경 (최신순/별점순/이름순/방문일순) ⭐ NEW
    ├─ 카테고리 필터 적용
    ├─ 카드 클릭 → [플로우 6]
    └─ 지도 뷰로 전환
```

---

### 4. 새 장소 추가하기 ✏️

```
[+ 장소 추가 버튼 클릭]
    ↓
[장소 등록 폼 열림]
    ↓
┌────────────────────────────┐
│ 장소 등록                  │
├────────────────────────────┤
│ 장소 검색: [검색창]        │
│  └─ 카카오맵 API 검색      │
│     ├─ 검색 결과 선택      │
│     │   └─ 주소 자동 입력 │
│     └─ 직접 입력           │
│                            │
│ 장소명: [        ]         │
│ 주소: [        ]           │
│ 카테고리: ○맛집 ○카페 ○멋진장소│
│                            │
│ 📅 방문일: [2024-08-15] 📅 │ ⭐ NEW
│    (언제 방문했나요?)      │
│    클릭 시 달력 팝업       │
│    기본값: 오늘 날짜       │
│                            │
│ 별점: ⭐⭐⭐⭐⭐            │
│ 한줄평: [        ]         │
│ 상세리뷰: [        ]       │
│ 추천메뉴: [        ]       │
│ 사진: [+ 업로드]           │
│ 그룹: □인천 □동탄 □수원   │
│                            │
│ [취소] [저장]              │
└────────────────────────────┘
    ↓
[저장 버튼 클릭]
    ↓
입력 검증
    ├─ 필수 항목 누락? → 에러 메시지
    └─ 정상 → 계속
    ↓
[Firebase에 데이터 저장]
    ├─ visitDate: 선택한 날짜 (또는 오늘) ⭐ NEW
    ├─ createdAt: 현재 시각 (자동)
    └─ updatedAt: 현재 시각 (자동)
    ↓
[사진 업로드 (있는 경우)]
    ↓
[저장 완료 알림]
    ↓
[지도 뷰로 이동]
    └─ 새 마커 표시됨
```

**달력 UI 동작:**
```
[방문일 필드 클릭]
    ↓
┌────────────────────┐
│   2024년 8월       │
│ 일 월 화 수 목 금 토│
│          1  2  3   │
│  4  5  6  7  8  9 10│
│ 11 12 13 14(15)16 17│ ← 선택됨
│ ...                │
│                    │
│ [오늘] [취소] [확인]│
└────────────────────┘
    ↓
- 오늘: 오늘 날짜로 설정
- 미래 날짜: 선택 불가 (회색 처리)
- 과거/오늘: 선택 가능
```

**입력 필드 상세:**
```
필수 입력:
- 장소명 ✅
- 주소 ✅
- 카테고리 ✅
- 별점 ✅

선택 입력:
- 방문일 (기본값: 오늘) ⭐ NEW
- 한줄평
- 상세리뷰
- 추천메뉴
- 사진 (최대 10장)
- 즐겨찾기 그룹
```

---

### 5. 장소 검색하기 🔍

```
[검색창 클릭]
    ↓
[검색어 입력]
    ↓
[실시간 검색 실행]
    ↓
검색 대상
    ├─ 장소명
    ├─ 주소
    ├─ 한줄평 내용
    └─ 추천메뉴
    ↓
┌─────────────────────┐
│ 검색 결과           │
│ - 장소A (하이라이트)│
│   📅 2024.08.15     │ ⭐ NEW
│ - 장소B             │
│   📅 2024.07.20     │ ⭐ NEW
│ - 장소C             │
│   📅 2024.06.10     │ ⭐ NEW
└─────────────────────┘
    ↓
사용자 선택
    ├─ 결과 없음 → "검색 결과가 없습니다"
    ├─ 결과 클릭 → [플로우 6]
    └─ 검색어 지우기 → 전체 목록
```

**검색 예시:**
```
검색어: "파스타"
→ 결과:
  - 이탈리안 레스토랑 (장소명 일치) 📅 2024.08.15
  - 동탄 맛집 (추천메뉴: 크림파스타) 📅 2024.07.10
  - 트라토리아 (한줄평: 파스타 맛있음) 📅 2024.06.05
```

---

### 6. 장소 상세 정보 보기 💬

```
[마커 클릭] 또는 [리스트 카드 클릭]
    ↓
[상세 모달 열림]
    ↓
┌────────────────────────────┐
│ ✕                          │
│ [대표 사진]                │
│                            │
│ 장소명                     │
│ ⭐⭐⭐⭐⭐ 4.5            │
│                            │
│ 📅 방문일: 2024.08.15     │ ⭐ NEW (메인)
│ 📝 작성일: 2024.12.01     │ (참고 정보)
│                            │
│ 주소: 경기도 동탄...       │
│ 카테고리: 맛집             │
│                            │
│ 📝 한줄평                  │
│ "크림 파스타 존맛!"        │
│                            │
│ 💬 상세 리뷰               │
│ "웨이팅 30분 있었지만..."  │
│                            │
│ 🍴 추천 메뉴               │
│ "크림 파스타, 알리오올리오"│
│                            │
│ 📸 사진 (3장)              │
│ [사진1][사진2][사진3]      │
│                            │
│ 📌 그룹: 동탄              │
│                            │
│ [수정] [삭제] [카카오맵]   │
└────────────────────────────┘
    ↓
사용자 선택
    ├─ 사진 클릭 → 확대 보기
    ├─ 수정 → [플로우 7]
    ├─ 삭제 → [플로우 8]
    ├─ 카카오맵 → 외부 링크
    └─ 닫기 (✕) → 이전 화면
```

**정보 우선순위:**
```
1. 방문일 📅 (언제 갔는지 - 가장 중요!)
2. 작성일 📝 (언제 기록했는지 - 참고용)
3. 수정일 🔄 (마지막 수정 - 필요시만)
```

---

### 7. 장소 정보 수정하기 ✏️

```
[상세 모달에서 수정 버튼]
    ↓
[편집 모드로 전환]
    ↓
┌────────────────────────────┐
│ 장소 수정                  │
├────────────────────────────┤
│ (등록 폼과 동일, 기존 데이터 채워짐) │
│                            │
│ 📅 방문일: [2024-08-15] 📅 │ ⭐ 수정 가능
│    달력 아이콘 클릭        │
│                            │
│ [취소] [저장]              │
└────────────────────────────┘
    ↓
[수정 사항 입력]
    ├─ 방문일도 수정 가능 ⭐ NEW
    └─ 다른 정보 수정
    ↓
[저장 버튼 클릭]
    ↓
[Firebase 데이터 업데이트]
    ├─ visitDate: 수정된 날짜 (또는 기존)
    └─ updatedAt: 현재 시각 (자동)
    ↓
[수정 완료 알림]
    ↓
[상세 모달 다시 열림]
    └─ 업데이트된 정보 표시
```

**수정 시나리오:**
```
원래 기록:
- 방문일: 2024.08.15
- 작성일: 2024.12.01

→ "아차! 실제로는 8월 20일에 갔었지"

수정 후:
- 방문일: 2024.08.20 ⭐ 수정됨
- 작성일: 2024.12.01 (그대로)
- 수정일: 2024.12.05 (자동 갱신)
```

---

### 8. 장소 삭제하기 🗑️

```
[상세 모달에서 삭제 버튼]
    ↓
[확인 알림창]
    ↓
┌────────────────────────────┐
│ 정말 삭제하시겠습니까?     │
│                            │
│ 장소명: 파스타 이야기      │
│ 방문일: 2024.08.15         │ ⭐ NEW
│                            │
│ ⚠️ 삭제하면 복구할 수 없습니다│
│                            │
│ [취소] [삭제]              │
└────────────────────────────┘
    ↓
사용자 선택
    ├─ 취소 → 상세 모달
    └─ 삭제 클릭
        ↓
[Firebase에서 데이터 삭제]
        ↓
[사진 파일도 삭제]
        ↓
[삭제 완료 알림]
        ↓
[지도 뷰로 이동]
        └─ 해당 마커 제거됨
```

---

### 9. 카테고리/그룹 필터 사용하기 🏷️

```
[필터 버튼 영역]
    ↓
사용자 선택
    ├─ 카테고리 필터
    │   ├─ 전체
    │   ├─ 맛집만
    │   ├─ 카페만
    │   └─ 멋진 장소만
    │
    └─ 즐겨찾기 그룹 필터
        ├─ 전체
        ├─ 인천
        ├─ 동탄
        └─ 수원
    ↓
[선택한 필터 적용]
    ↓
┌──────────────────────┐
│ 지도 & 리스트 동시 업데이트│
│ - 해당하는 마커만 표시  │
│ - 해당하는 카드만 표시  │
└──────────────────────┘
    ↓
필터 상태 표시
    예: "카페 (15) | 동탄 (8)"
```

**필터 조합 예시:**
```
카테고리: 맛집 + 그룹: 인천
→ 인천에 있는 맛집만 표시

카테고리: 전체 + 그룹: 동탄
→ 동탄의 모든 장소 (맛집+카페+멋진 장소)
```

---

### 10. 현재 위치 기반 검색 📍 (v1.0 선택)

```
[현재 위치 버튼 클릭]
    ↓
[위치 권한 요청]
    ↓
    ├─ 허용 → 계속
    └─ 거부 → "위치 권한이 필요합니다"
    ↓
[현재 위치 파악]
    ↓
[지도 중심을 현재 위치로 이동]
    ↓
[주변 2km 이내 장소 필터링]
    ↓
┌──────────────────────┐
│ 내 주변 장소 (5)     │
│ - 장소A (500m)       │
│   📅 2024.08.15      │ ⭐ NEW
│ - 장소B (800m)       │
│   📅 2024.07.20      │ ⭐ NEW
│ - 장소C (1.2km)      │
│   📅 2024.06.10      │ ⭐ NEW
└──────────────────────┘
    ↓
[거리순 정렬 옵션]
```

---

## 🎬 v1.0 주요 시나리오별 플로우

### 시나리오 A: 주말 맛집 다녀온 후 기록 (당일)

```
[토요일 저녁, 집에 도착]
    ↓
[Our-Taste-Map 접속]
    ↓
[+ 장소 추가] → [플로우 4]
    ↓
[장소 검색: "파스타 이야기"]
    ↓
[정보 입력]
    - 방문일: 2024.08.15 (오늘, 자동) ⭐
    - 별점: ⭐⭐⭐⭐⭐
    - 한줄평: "크림 파스타 존맛"
    - 사진 3장 업로드
    - 그룹: 동탄
    ↓
[저장]
    ↓
[지도에서 확인]
    └─ 🍽️ 새 마커 추가됨!
```

---

### 시나리오 B: 지난주 갔던 곳 나중에 기록

```
[일요일 저녁, 정리하면서]
    ↓
[Our-Taste-Map 접속]
    ↓
[+ 장소 추가]
    ↓
"지난주 수요일에 갔던 그 카페..."
    ↓
[정보 입력]
    - 방문일: 📅 클릭 → 2024.08.07 선택 ⭐
      (오늘은 8월 11일이지만, 실제 방문일 선택)
    - 별점: ⭐⭐⭐⭐
    - 한줄평: "브런치 맛있었음"
    - 사진: 인스타에서 다운받아서 업로드
    ↓
[저장]
    ↓
결과:
- 방문일: 2024.08.07 (실제 방문한 날) ✅
- 작성일: 2024.08.11 (오늘 기록함) ✅
```

**이것이 중요한 이유:**
```
❌ 작성일만 있으면:
   → "2024.08.11에 기록" 
   → 실제 언제 갔는지 모름

✅ 방문일이 있으면:
   → "2024.08.07에 방문" 
   → 정확한 시점 기록!
```

---

### 시나리오 C: 다음 주말 인천 맛집 찾기

```
[금요일 저녁]
    ↓
[Our-Taste-Map 접속]
    ↓
[그룹 필터: 인천 선택] → [플로우 9]
    ↓
[방문일순 정렬 클릭] ⭐ NEW
    ↓
"최근에 간 곳부터 보자"
    ↓
┌──────────────────────┐
│ 인천 맛집 목록       │
│ 1. 차이나타운 짬뽕집 │
│    📅 2024.07.15     │
│    ⭐⭐⭐⭐⭐       │
│ 2. 송도 파스타집     │
│    📅 2024.05.20     │
│    ⭐⭐⭐⭐         │
│ 3. 월미도 해물찜     │
│    📅 2024.03.10     │
│    ⭐⭐⭐⭐⭐       │
└──────────────────────┘
    ↓
[마커 클릭] → [플로우 6]
    ↓
[상세 정보 확인]
    - 방문일: 2024.07.15 (2개월 전)
    - "아! 최근에 갔었구나"
    - 사진 보면서 회상
    ↓
[결정: 다른 곳 가자!]
```

---

### 시나리오 D: 친구에게 맛집 추천

```
[카톡: "동탄 카페 추천해줘"]
    ↓
[Our-Taste-Map 접속]
    ↓
[필터: 카페 + 동탄] → [플로우 9]
    ↓
[방문일순 정렬] ⭐ NEW
    ↓
"최근에 간 곳이 기억도 잘 나고..."
    ↓
[상위 카페 선택] → [플로우 6]
    ↓
[상세 정보 복사]
    - 이름: 브라운스톤 카페
    - 방문일: 2024.08.01 (2주 전)
    - 별점: ⭐⭐⭐⭐⭐
    - 한줄평: "브런치 맛있음"
    - 사진 캡처
    ↓
[카톡으로 전송]
    "여기 2주 전에 갔는데 진짜 좋았어!"
```

---

## 🎯 v2.0 추가 플로우

### 재방문 기록 (v2.0)

```
[상세 모달]
    ↓
[재방문 기록 추가 버튼] ⭐ NEW
    ↓
┌────────────────────────────┐
│ 재방문 기록 추가           │
├────────────────────────────┤
│ 기존 방문 내역:            │
│ • 2024.08.15 ⭐⭐⭐⭐⭐   │
│                            │
│ 📅 방문일: [2024-12-01] 📅 │
│ 별점: ⭐⭐⭐⭐⭐            │
│ 한줄평: [        ]         │
│ 사진: [+ 업로드]           │
│                            │
│ [취소] [저장]              │
└────────────────────────────┘
    ↓
[저장]
    ↓
[상세 모달에 방문 이력 표시]
    ↓
┌────────────────────────────┐
│ 파스타 이야기              │
│                            │
│ 📅 방문 이력 (2회)         │
│ ┌────────────────────┐     │
│ │ 2024.12.01 ⭐⭐⭐⭐⭐│     │
│ │ "재방문, 역시 맛있음"│     │
│ │ [사진1]            │     │
│ └────────────────────┘     │
│ ┌────────────────────┐     │
│ │ 2024.08.15 ⭐⭐⭐⭐⭐│     │
│ │ "첫 방문, 크림파스타"│     │
│ │ [사진1][사진2]     │     │
│ └────────────────────┘     │
└────────────────────────────┘
```

---

### 타임라인 뷰 (v2.0)

```
[메인 메뉴]
    ↓
[타임라인 보기 선택]
    ↓
┌────────────────────────────┐
│ 📅 2024년 8월              │
│ ┌────────────────────┐     │
│ │ 08.15 파스타 이야기│     │
│ │ 🍽️ ⭐⭐⭐⭐⭐       │     │
│ └────────────────────┘     │
│ ┌────────────────────┐     │
│ │ 08.07 브런치 카페  │     │
│ │ ☕ ⭐⭐⭐⭐         │     │
│ └────────────────────┘     │
│                            │
│ 📅 2024년 7월              │
│ ┌────────────────────┐     │
│ │ 07.20 동탄 맛집    │     │
│ │ 🍽️ ⭐⭐⭐⭐⭐       │     │
│ └────────────────────┘     │
└────────────────────────────┘
    ↓
클릭 시 상세 모달
```

---

### 회원가입/로그인 (v2.0)

```
[웹사이트 접속]
    ↓
[로그인 화면]
    ↓
신규 사용자?
    ├─ Yes → [회원가입]
    │   ├─ 이메일 가입
    │   └─ 소셜 로그인 (구글/카카오)
    │   ↓
    │   [프로필 설정]
    │   ↓
    │   [메인 화면]
    │
    └─ No → [로그인]
        ├─ 이메일 로그인
        └─ 소셜 로그인
        ↓
        [메인 화면]
```

---

### 공유 링크 생성 (v2.0)

```
[상세 모달]
    ↓
[공유 버튼 클릭]
    ↓
┌────────────────────────────┐
│ 공유 옵션                  │
│ ○ 이 장소만               │
│ ○ 내 전체 지도             │
│                            │
│ 🔗 링크: https://...       │
│                            │
│ [링크 복사] [카톡 공유]    │
└────────────────────────────┘
    ↓
[링크 생성]
    ↓
[클립보드에 복사]
    ↓
"링크가 복사되었습니다!"
```

---

## 📱 모바일 vs PC 차이점

### 모바일 (우선)
- 외출 후 바로 등록
- 사진 촬영 → 즉시 업로드
- **방문일: 대부분 "오늘" 선택** ⭐
- 간편한 입력
- 현재 위치 기능 중요

### PC (편의)
- 편한 타이핑
- 큰 화면에서 지도 탐색
- **방문일: 과거 날짜 선택 용이** ⭐
- 여러 장소 한번에 관리
- 사진 일괄 업로드

---

## 🎨 화면 전환 흐름도

```
                [메인 화면]
                     ↓
        ┌────────────┼────────────┐
        ↓            ↓            ↓
    [지도 뷰]   [리스트 뷰]  [장소 추가]
        ↓            ↓            ↓
        │        [정렬 옵션]      │
        │    ┌──────┼──────┐     │
        │    ↓      ↓      ↓     │
        │  최신순 별점순 방문일순 │ ⭐ NEW
        │            ↓            │
        └────────[상세 모달]──────┘
                     ↓
              ┌──────┼──────┐
              ↓      ↓      ↓
           [수정]  [삭제]  [닫기]
              ↓      ↓      ↓
              └──[메인 화면]─┘
```

---

## 🚫 에러 처리 플로우

### 잘못된 방문일 입력 ⭐ NEW

```
[방문일 입력]
    ↓
미래 날짜 선택 시도
    ↓
┌────────────────────────────┐
│ ⚠️ 유효하지 않은 날짜       │
│                            │
│ 방문일은 오늘 또는         │
│ 과거 날짜만 선택 가능합니다│
│                            │
│ [확인]                     │
└────────────────────────────┘
    ↓
달력에서 미래 날짜 비활성화
```

---

### 네트워크 오류

```
[API 요청 실패]
    ↓
[에러 감지]
    ↓
┌────────────────────────────┐
│ ⚠️ 네트워크 오류            │
│                            │
│ 인터넷 연결을 확인해주세요 │
│                            │
│ [다시 시도]                │
└────────────────────────────┘
    ↓
사용자 선택
    ├─ 다시 시도 → 재시도
    └─ 닫기 → 이전 화면
```

---

### 데이터 없음

```
[검색 결과 0건]
    ↓
┌────────────────────────────┐
│ 😕 검색 결과가 없습니다     │
│                            │
│ 다른 키워드로 검색해보세요 │
│                            │
│ [+ 새 장소 추가하기]       │
└────────────────────────────┘
```

---

### 권한 거부

```
[위치 권한 요청]
    ↓
[사용자 거부]
    ↓
┌────────────────────────────┐
│ ℹ️ 위치 권한이 필요합니다   │
│                            │
│ 설정에서 권한을 허용해주세요│
│                            │
│ [설정 열기] [취소]         │
└────────────────────────────┘
```

---

## 📝 변경 이력

| 날짜 | 내용 | 작성자 |
|------|------|--------|
| 2026.02.12 | 사용자 플로우 초안 작성 | - |
| 2026.02.12 | 방문일 기능 모든 플로우에 반영 | - |

---

주요 내용:

✅ 10가지 주요 플로우 상세 정리
✅ 실제 시나리오 3가지 (맛집 기록, 찾기, 추천)
✅ 화면 예시 포함
✅ v2.0 추가 플로우 (로그인, 공유)
✅ 에러 처리 플로우
✅ 모바일 vs PC 차이점

주요 업데이트 내용:

- ✅ 방문일 기능 반영
  - 1. 장소 등록 (플로우 4)
    - 📅 방문일 입력 필드 추가
    - 달력 UI 동작 설명
    - 기본값: 오늘 날짜
    - 미래 날짜 선택 불가
  - 2. 상세 모달 (플로우 6)
    - 📅 방문일: 2024.08.15 (메인 정보)
    - 📝 작성일: 2024.12.01 (참고 정보)
  - 3. 리스트 뷰 (플로우 3)
    - 카드에 방문일 표시
    - 방문일순 정렬 옵션 추가
  - 4. 시나리오 추가
    - 시나리오 A: 당일 기록 (방문일 = 오늘)
    - 시나리오 B: 나중에 기록 (방문일 = 과거 선택) ⭐ 핵심!
    - 시나리오 C: 방문일순 정렬로 최근 방문 찾기
    - 시나리오 D: 최근 방문 기준 추천
  - 5. v2.0 추가 플로우
    - 재방문 기록 (여러 방문일 관리)
    - 타임라인 뷰 (방문일 기준 정렬)
  - 6. 에러 처리
    - 미래 날짜 선택 시도 시 경고

---